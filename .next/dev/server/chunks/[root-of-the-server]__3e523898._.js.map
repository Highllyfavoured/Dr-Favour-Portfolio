{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/Desktop/Dr-Favour-portfolio/app/api/submit-form/route.js"],"sourcesContent":["// app/api/submit-form/route.js\r\nimport nodemailer from 'nodemailer';\r\nimport { NextResponse } from 'next/server';\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const { name, email, message } = await request.json();\r\n\r\n    // Validate required fields\r\n    if (!name || !email || !message) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          message: 'All fields (name, email, message) are required.'\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Validate email format\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email)) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          message: 'Please provide a valid email address.'\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Validate field lengths\r\n    if (name.length < 2 || name.length > 100) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          message: 'Name must be between 2 and 100 characters.'\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    if (message.length < 10 || message.length > 1000) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          message: 'Message must be between 10 and 1000 characters.'\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Create transporter for sending emails\r\n    const transporter = nodemailer.createTransporter({\r\n      service: 'gmail',\r\n      auth: {\r\n        user: process.env.EMAIL_USER,\r\n        pass: process.env.EMAIL_PASS,\r\n      },\r\n    });\r\n\r\n    // Email content for you (notification)\r\n    const notificationEmail = {\r\n      from: process.env.EMAIL_USER,\r\n      to: process.env.EMAIL_USER,\r\n      subject: `New Contact Form Submission from ${name}`,\r\n      html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n          <h2 style=\"color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;\">\r\n            New Contact Form Submission\r\n          </h2>\r\n          \r\n          <div style=\"background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;\">\r\n            <h3 style=\"color: #007bff; margin-top: 0;\">Contact Details:</h3>\r\n            <p><strong>Name:</strong> ${name}</p>\r\n            <p><strong>Email:</strong> ${email}</p>\r\n          </div>\r\n          \r\n          <div style=\"background-color: #fff; padding: 20px; border-left: 4px solid #007bff;\">\r\n            <h3 style=\"color: #333; margin-top: 0;\">Message:</h3>\r\n            <p style=\"line-height: 1.6; color: #555;\">${message}</p>\r\n          </div>\r\n          \r\n          <div style=\"margin-top: 30px; padding: 15px; background-color: #e9ecef; border-radius: 8px;\">\r\n            <p style=\"margin: 0; color: #666; font-size: 14px;\">\r\n              <strong>Submitted:</strong> ${new Date().toLocaleString()}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      `,\r\n    };\r\n\r\n    // Auto-reply email for the sender\r\n    const autoReplyEmail = {\r\n      from: process.env.EMAIL_USER,\r\n      to: email,\r\n      subject: 'Thank you for contacting Dr. Olaosebikan Favour',\r\n      html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n          <h2 style=\"color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 10px;\">\r\n            Thank You for Your Message!\r\n          </h2>\r\n          \r\n          <p style=\"font-size: 16px; color: #333; line-height: 1.6;\">\r\n            Hi ${name},\r\n          </p>\r\n          \r\n          <p style=\"font-size: 16px; color: #333; line-height: 1.6;\">\r\n            Thank you for reaching out! I've received your message and will get back to you as soon as possible, typically within 24-48 hours.\r\n          </p>\r\n          \r\n          <div style=\"background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;\">\r\n            <h3 style=\"color: #007bff; margin-top: 0;\">Your Message:</h3>\r\n            <p style=\"color: #555; font-style: italic;\">\"${message}\"</p>\r\n          </div>\r\n          \r\n          <div style=\"margin-top: 30px; padding: 20px; background-color: #007bff; border-radius: 8px; text-align: center;\">\r\n            <p style=\"margin: 0; color: white; font-size: 16px;\">\r\n              Best regards,<br>\r\n              <strong>Dr. Olaosebikan Favour</strong>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      `,\r\n    };\r\n\r\n    // Send both emails\r\n    await Promise.all([\r\n      transporter.sendMail(notificationEmail),\r\n      transporter.sendMail(autoReplyEmail)\r\n    ]);\r\n\r\n    console.log(`New contact form submission from ${name} (${email}) at ${new Date().toISOString()}`);\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Thank you for your message! I will get back to you soon.'\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Contact form submission error:', error);\r\n    \r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        message: 'Sorry, there was an error sending your message. Please try again later.'\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function OPTIONS() {\r\n  return new NextResponse(null, {\r\n    status: 200,\r\n    headers: {\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n    },\r\n  });\r\n}"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;;;;;;AAE/B;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEnD,2BAA2B;QAC3B,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS;YAC/B,OAAO,+QAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,SAAS;YACX,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,wBAAwB;QACxB,MAAM,aAAa;QACnB,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ;YAC3B,OAAO,+QAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,SAAS;YACX,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,yBAAyB;QACzB,IAAI,KAAK,MAAM,GAAG,KAAK,KAAK,MAAM,GAAG,KAAK;YACxC,OAAO,+QAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,SAAS;YACX,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,QAAQ,MAAM,GAAG,MAAM,QAAQ,MAAM,GAAG,MAAM;YAChD,OAAO,+QAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,SAAS;YACX,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,wCAAwC;QACxC,MAAM,cAAc,WAAW,iBAAiB,CAAC;YAC/C,SAAS;YACT,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,UAAU;gBAC5B,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC9B;QACF;QAEA,uCAAuC;QACvC,MAAM,oBAAoB;YACxB,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC5B,IAAI,QAAQ,GAAG,CAAC,UAAU;YAC1B,SAAS,CAAC,iCAAiC,EAAE,MAAM;YACnD,MAAM,CAAC;;;;;;;;sCAQyB,EAAE,KAAK;uCACN,EAAE,MAAM;;;;;sDAKO,EAAE,QAAQ;;;;;0CAKtB,EAAE,IAAI,OAAO,cAAc,GAAG;;;;MAIlE,CAAC;QACH;QAEA,kCAAkC;QAClC,MAAM,iBAAiB;YACrB,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC5B,IAAI;YACJ,SAAS;YACT,MAAM,CAAC;;;;;;;eAOE,EAAE,KAAK;;;;;;;;;yDASmC,EAAE,QAAQ;;;;;;;;;;MAU7D,CAAC;QACH;QAEA,mBAAmB;QACnB,MAAM,QAAQ,GAAG,CAAC;YAChB,YAAY,QAAQ,CAAC;YACrB,YAAY,QAAQ,CAAC;SACtB;QAED,QAAQ,GAAG,CAAC,CAAC,iCAAiC,EAAE,KAAK,EAAE,EAAE,MAAM,KAAK,EAAE,IAAI,OAAO,WAAW,IAAI;QAEhG,OAAO,+QAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAEhD,OAAO,+QAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS;QACX,GACA;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe;IACpB,OAAO,IAAI,+QAAY,CAAC,MAAM;QAC5B,QAAQ;QACR,SAAS;YACP,+BAA+B;YAC/B,gCAAgC;YAChC,gCAAgC;QAClC;IACF;AACF"}}]
}